{"ast":null,"code":"import _slicedToArray from\"/Users/akrik/Desktop/udemy-react-front-to-back/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Card from\"./shared/Card\";import{useState}from\"react\";import Button from\"./shared/Button\";import RatingSelect from\"./RatingSelect\";import{useContext}from\"react\";import FeedbackContext from\"../context/FeedbackContext\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),btnDisabled=_useState6[0],setBtnDisabled=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(event){if(text===\"\"){setBtnDisabled(true);setMessage(null);}else if(text!==\"\"&&text.trim().length<=10){setBtnDisabled(true);setMessage(\"Text must be at least 10 characters!\");}else{setBtnDisabled(false);setMessage(null);}setText(event.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How you rate our service?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:handleTextChange,placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"sumbit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["Card","useState","Button","RatingSelect","useContext","FeedbackContext","useEffect","FeedbackForm","text","setText","rating","setRating","btnDisabled","setBtnDisabled","message","setMessage","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","event","trim","length","target","value","handleSubmit","e","preventDefault","newFeedback","id"],"sources":["/Users/akrik/Desktop/udemy-react-front-to-back/feedback-app/src/components/FeedbackForm.jsx"],"sourcesContent":["import Card from \"./shared/Card\";\nimport { useState } from \"react\";\nimport Button from \"./shared/Button\";\nimport RatingSelect from \"./RatingSelect\";\nimport { useContext } from \"react\";\nimport FeedbackContext from \"../context/FeedbackContext\";\nimport { useEffect } from \"react\";\n\nfunction FeedbackForm() {\n  const [text, setText] = useState(\"\");\n  const [rating, setRating] = useState(10);\n  const [btnDisabled, setBtnDisabled] = useState(true);\n  const [message, setMessage] = useState(\"\");\n\n  const { addFeedback, feedbackEdit, updateFeedback } =\n    useContext(FeedbackContext);\n\n  useEffect(() => {\n    if (feedbackEdit.edit === true) {\n      setBtnDisabled(false);\n      setText(feedbackEdit.item.text);\n      setRating(feedbackEdit.item.rating);\n    }\n  }, [feedbackEdit]);\n\n  const handleTextChange = (event) => {\n    if (text === \"\") {\n      setBtnDisabled(true);\n      setMessage(null);\n    } else if (text !== \"\" && text.trim().length <= 10) {\n      setBtnDisabled(true);\n      setMessage(\"Text must be at least 10 characters!\");\n    } else {\n      setBtnDisabled(false);\n      setMessage(null);\n    }\n    setText(event.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (text.trim().length > 10) {\n      const newFeedback = {\n        text,\n        rating,\n      };\n\n      if (feedbackEdit.edit === true) {\n        updateFeedback(feedbackEdit.item.id, newFeedback);\n      } else {\n        addFeedback(newFeedback);\n      }\n    }\n  };\n\n  return (\n    <Card>\n      <form onSubmit={handleSubmit}>\n        <h2>How you rate our service?</h2>\n        <RatingSelect\n          select={(rating) => {\n            setRating(rating);\n          }}\n        />\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            onChange={handleTextChange}\n            placeholder=\"Write a review\"\n            value={text}\n          />\n          <Button type=\"sumbit\" isDisabled={btnDisabled}>\n            Send\n          </Button>\n        </div>\n        {message && <div className=\"message\">{message}</div>}\n      </form>\n    </Card>\n  );\n}\n\nexport default FeedbackForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}